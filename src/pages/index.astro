---
import '../styles/global.css';
import Header from "../components/Header.astro";
import Sidebar from "../components/Sidebar.astro";
import {getCollection} from 'astro:content';
import Post from "../components/Post.astro";
import Hero from "../components/Hero.astro";
import { ClientRouter } from 'astro:transitions';

const allPosts = (await getCollection('blog'))
    .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width"/>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg"/>
    <meta name="generator" content={Astro.generator}/>
    <title>Tinker's Damn</title>
    <ClientRouter />
</head>
<body class="bg-neutral-950">

<!-- Full-width Hero Section -->
<Hero/>

<div id="navigation-start">
    <Header showLogo={false}/>
</div>

<!-- Regular content with sidebar layout -->
<div class="flex">
    <div class="p-5 lg:max-w-6xl md:max-w-4xl w-full mx-auto">
        <div id="content">
            {allPosts.map((post, index) => (
                    <div style={`animation-delay: ${index * 0.1}s`}>
                        <Post id={post.id} key={index}/>
                    </div>
            ))}
        </div>
    </div>
    <div class="w-64">
        <Sidebar/>
    </div>
</div>

</body>
</html>
